<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.P.A. QUANTUM v9.1 - AGENDAMENTO INTELIGENTE</title>
    <style>
        :root { --ouro: #D4AF37; --fundo: #050505; --neon: #00ff00; --cyan: #00eaff; }
        body { background: var(--fundo); color: #fff; font-family: 'Courier New', sans-serif; padding: 10px; margin: 0; }
        .header { border-bottom: 2px solid var(--ouro); padding: 10px; font-size: 11px; color: var(--ouro); text-align: center; margin-bottom: 10px; }
        .card { background: #0a0a0a; border: 1px solid #1a1a1a; border-left: 4px solid var(--cyan); border-radius: 8px; padding: 12px; margin-bottom: 8px; position: relative; }
        .master-card { border-left: 4px solid var(--ouro); background: #0f0f00; }
        .label { font-size: 9px; color: #666; text-transform: uppercase; margin-bottom: 4px; }
        .status-ok { font-size: 10px; color: var(--neon); display: none; margin: 5px 0; }
        input[type="password"] { width: 92%; background: #000; border: 1px solid #333; color: var(--neon); padding: 10px; margin-top: 5px; }
        button { width: 100%; padding: 12px; margin-top: 8px; background: #111; border: 1px solid var(--neon); color: var(--neon); font-weight: bold; cursor: pointer; border-radius: 4px; }
        .btn-anexo { border-color: var(--ouro); color: var(--ouro); margin-bottom: 5px; }
        #secao-rodadas { display: none; margin-top: 20px; }
    </style>
</head>
<body>

<div class="header">
    <strong>S.P.A. QUANTUM v9.1 | S. A. SNIPER</strong><br>
    <span id="clock">00:00:00</span>
</div>

<div class="card master-card">
    <div class="label">FASE 01: AUDITORIA (ANEXE PARA LIBERAR O HOR√ÅRIO)</div>
    <input type="file" id="up-v" accept="video/*" style="display:none;" onchange="valida()">
    <button class="btn-anexo" onclick="document.getElementById('up-v').click()">üìÅ ANEXAR V√çDEO</button>
    <div id="ok-v" class="status-ok">‚úÖ V√çDEO OK</div>

    <input type="file" id="up-p" accept="image/*" style="display:none;" onchange="valida()">
    <button class="btn-anexo" onclick="document.getElementById('up-p').click()">üì∏ ANEXAR PRINT HIST√ìRICO</button>
    <div id="ok-p" class="status-ok">‚úÖ HIST√ìRICO OK</div>
</div>

<div id="secao-rodadas">
    <div style="color:var(--ouro); font-size:10px; text-align:center; margin-bottom:10px;">üïí HOR√ÅRIOS GERADOS COM BASE NO √öLTIMO PRINT</div>
    <div id="container-pacientes"></div>
</div>

<script>
    let videoOk = false;
    let printOk = false;

    function valida() {
        if(document.getElementById('up-v').files.length > 0) { document.getElementById('ok-v').style.display='block'; videoOk = true; }
        if(document.getElementById('up-p').files.length > 0) { document.getElementById('ok-p').style.display='block'; printOk = true; }
        
        // S√≥ libera e gera os hor√°rios quando os dois estiverem anexados
        if(videoOk && printOk) {
            document.getElementById('secao-rodadas').style.display = 'block';
            gerarHorarios();
        }
    }

    function gerarHorarios() {
        const cont = document.getElementById('container-pacientes');
        cont.innerHTML = '';
        let agora = new Date();
        
        for(let i=1; i<=3; i++) {
            // D√° 3 minutos de margem para a primeira e 2 minutos entre as outras
            let minutos = (i === 1) ? 3 : 2;
            agora.setMinutes(agora.getMinutes() + minutos);
            let tempo = agora.toLocaleTimeString('pt-BR');

            cont.innerHTML += `
                <div class="card">
                    <div style="float:right; color:var(--ouro); font-weight:bold;">${tempo}</div>
                    <div class="label">PRONTU√ÅRIO #00${i}</div>
                    <input type="password" id="seed-${i}" placeholder="COLE A SEMENTE...">
                    <button onclick="calc(${i})">EXECUTAR AN√ÅLISE</button>
                    <div id="res-${i}" style="margin-top:10px; color:var(--neon); font-weight:bold; display:none; text-align:center;"></div>
                </div>`;
        }
    }

    function calc(id) {
        let alvo = (Math.random() * 0.4 + 1.1).toFixed(2);
        let final = (alvo * 0.5).toFixed(2);
        if(final < 1.05) final = 1.05;
        
        const r = document.getElementById(`res-${id}`);
        r.style.display = 'block';
        r.innerHTML = `ALVO: ${final}X | STAKE: R$ 1,12`;
    }

    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString('pt-BR'); }, 1000);
</script>
</body>
</html>
